# 로또 번호 제조기 PRD (Product Requirements Document)

## 1. 프로젝트 개요

### 1.1 프로젝트명
로또 번호 제조기

### 1.2 목적
사용자가 로또 번호를 자동으로 생성하고, 과거 당첨 번호를 참고하며, 특정 번호를 포함하거나 제외할 수 있는 웹 애플리케이션

### 1.3 기술 제약사항
- 순수 HTML, CSS, JavaScript만 사용
- 프레임워크, 라이브러리, 빌드 도구 사용 금지
- 바닐라 JavaScript로만 구현

### 1.4 주요 기능
- 지난 당첨번호 조회 및 표시
- 제외번호/포함번호 설정
- 로또 번호 자동 생성 (5세트)

---

## 2. 기능 요구사항

### 2.1 지난 당첨번호 표시

#### 2.1.1 API 연동
- **API 호출 방법**: `fetch` 사용
- **API 엔드포인트**: 동행복권 로또 API
  - URL: `https://www.dhlottery.co.kr/common.do?method=getLottoNumber&drwNo={회차}`
  - 최신 회차 조회 가능
- **표시 정보**
  - 회차 번호
  - 추첨일
  - 당첨번호 6개
  - 보너스번호 1개

#### 2.1.2 UI 표시
- 화면 상단에 최근 당첨번호 표시
- 번호는 작은 원형 뱃지로 표시
- 보너스번호는 구분하여 표시

### 2.2 번호 필터링 기능

#### 2.2.1 제외번호 입력
- **입력 방식**: 텍스트 입력 필드
- **입력 형식**: 쉼표(,)로 구분된 숫자
- **예시**: `1, 7, 13, 21`
- **유효성 검증**
  - 1~45 범위 내 숫자만 허용
  - 중복 입력 시 자동 제거
  - 잘못된 입력 시 에러 메시지 표시

#### 2.2.2 포함번호 입력
- **입력 방식**: 텍스트 입력 필드
- **입력 형식**: 쉼표(,)로 구분된 숫자
- **예시**: `3, 12, 25`
- **유효성 검증**
  - 1~45 범위 내 숫자만 허용
  - 최대 6개까지만 입력 가능
  - 제외번호와 중복 시 경고 메시지
  - 중복 입력 시 자동 제거

### 2.3 로또 번호 생성

#### 2.3.1 생성 규칙
- **번호 범위**: 1 ~ 45
- **세트당 번호 개수**: 6개
- **생성 세트 수**: 5세트
- **중복 제거**: 각 세트 내에서 번호 중복 불가

#### 2.3.2 생성 로직
1. 1~45 범위의 숫자 배열 생성
2. 제외번호가 있는 경우 해당 번호 제거
3. 포함번호가 있는 경우 먼저 배치
4. 남은 자리를 무작위 번호로 채움
5. 번호를 오름차순 정렬
6. 위 과정을 5번 반복하여 5세트 생성

#### 2.3.3 버튼
- **버튼명**: "번호 생성"
- **위치**: 필터링 입력 필드 하단
- **동작**: 클릭 시 5세트의 로또 번호 생성 및 표시

### 2.4 생성된 번호 표시

#### 2.4.1 표시 형식
- 각 세트를 카드 형태로 표시
- 번호는 작은 원형 뱃지로 표시
- 오름차순 정렬
- 포함번호는 하이라이트 표시 (예: 다른 색상)

#### 2.4.2 레이아웃
```
[세트 1]  ⚪ 3  ⚪ 12  ⚪ 19  ⚪ 25  ⚪ 33  ⚪ 41
[세트 2]  ⚪ 5  ⚪ 14  ⚪ 21  ⚪ 28  ⚪ 35  ⚪ 42
[세트 3]  ⚪ 7  ⚪ 15  ⚪ 23  ⚪ 29  ⚪ 37  ⚪ 43
[세트 4]  ⚪ 9  ⚪ 17  ⚪ 24  ⚪ 31  ⚪ 38  ⚪ 44
[세트 5]  ⚪ 11 ⚪ 18  ⚪ 26  ⚪ 32  ⚪ 40  ⚪ 45
```

---

## 3. UI/UX 요구사항

### 3.1 레이아웃
- **정렬**: 전체 화면 가운데 정렬 (중앙 정렬)
- **반응형**: 모바일/태블릿/데스크톱 대응


### 3.2 스타일 가이드
- **폰트**: 깔끔한 산세리프 계열
- **컬러**:
  - 주요 색상: 로또 공식 색상 참고 (노란색 계열)
  - 번호 뱃지: 번호 범위별 다른 색상 (선택사항)
    - 1~10: 노란색
    - 11~20: 파란색
    - 21~30: 빨간색
    - 31~40: 회색
    - 41~45: 초록색
- **여백**: 적절한 패딩과 마진으로 가독성 확보

---

## 4. 기술 요구사항

### 4.1 기술 스택
- **언어**: HTML, CSS, JavaScript (Vanilla JS)
- **API 통신**: `fetch` API 사용
- **번호 생성**: JavaScript 내장 `Math.random()` 사용

### 4.2 외부 API
- **동행복권 로또 API**
  - 엔드포인트: `https://www.dhlottery.co.kr/common.do?method=getLottoNumber&drwNo={회차}`
  - 응답 형식: JSON
  - CORS 이슈 대응 필요 시 프록시 사용

### 4.3 브라우저 호환성
- 최신 Chrome, Firefox, Safari, Edge 지원

---

## 5. 데이터 요구사항

### 5.1 입력 데이터
- 제외번호: 문자열 (쉼표 구분)
- 포함번호: 문자열 (쉼표 구분)

### 5.2 출력 데이터
- 생성된 번호: 5개의 배열, 각 배열은 6개의 숫자 포함
  ```javascript
  [
    [3, 12, 19, 25, 33, 41],
    [5, 14, 21, 28, 35, 42],
    [7, 15, 23, 29, 37, 43],
    [9, 17, 24, 31, 38, 44],
    [11, 18, 26, 32, 40, 45]
  ]
  ```

---

## 6. 유효성 검증

### 6.1 제외번호 검증
- 1~45 범위 검증
- 숫자 형식 검증
- 중복 제거

### 6.2 포함번호 검증
- 1~45 범위 검증
- 숫자 형식 검증
- 최대 6개 제한
- 제외번호와 중복 체크
- 중복 제거

### 6.3 생성 번호 검증
- 각 세트당 정확히 6개
- 모든 번호가 1~45 범위
- 세트 내 중복 없음
- 제외번호 미포함
- 포함번호 모두 포함

---

## 7. 에러 처리

### 7.1 API 에러
- 네트워크 에러 시 사용자에게 알림
- API 응답 실패 시 기본 메시지 표시
- 재시도 버튼 제공

### 7.2 입력 에러
- 잘못된 번호 입력 시 경고 메시지
- 제외번호와 포함번호 중복 시 경고
- 포함번호 6개 초과 시 경고

---

## 8. 추가 고려사항

### 8.1 향후 확장 가능성
- 당첨 통계 분석 기능
- 번호별 출현 빈도 표시
- 생성된 번호 저장 기능
- 여러 회차 당첨번호 비교
- QR 코드 생성 (복권 구매용)

### 8.2 성능
- API 호출 최소화 (캐싱)
- 번호 생성 알고리즘 최적화

### 8.3 접근성
- 키보드 네비게이션 지원
- 스크린 리더 호환성
- 명확한 레이블 및 설명

---

## 9. 테스트 시나리오

### 9.1 기본 기능 테스트
- [ ] 페이지 로드 시 최신 당첨번호 표시
- [ ] 번호 생성 버튼 클릭 시 5세트 생성
- [ ] 생성된 번호가 오름차순 정렬
- [ ] 각 세트에 중복 번호 없음

### 9.2 필터링 테스트
- [ ] 제외번호 입력 후 해당 번호 미포함
- [ ] 포함번호 입력 후 해당 번호 모두 포함
- [ ] 제외번호와 포함번호 중복 시 경고

### 9.3 에러 처리 테스트
- [ ] 잘못된 번호 입력 시 에러 메시지
- [ ] API 실패 시 적절한 메시지
- [ ] 46 이상 또는 0 이하 입력 시 검증

### 9.4 UI/UX 테스트
- [ ] 모바일 반응형 확인
- [ ] 버튼 클릭 반응 확인
- [ ] 가독성 및 접근성 확인

---

## 부록: API 응답 예시

```json
{
  "totSellamnt": 104173701000,
  "returnValue": "success",
  "drwNoDate": "2024-12-28",
  "firstWinamnt": 2214547872,
  "firstPrzwnerCo": 12,
  "drwtNo1": 4,
  "drwtNo2": 14,
  "drwtNo3": 20,
  "drwtNo4": 25,
  "drwtNo5": 28,
  "drwtNo6": 40,
  "bnusNo": 42,
  "drwNo": 1148
}
```